@tailwind base;
@tailwind components;
@tailwind utilities;

/* QIX Design System - New Era Government Portal */
/* Mada Accessibility Guidelines Compliant (WCAG 2.1 AA) */
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');

@layer base {
  :root {
    /* CRA-Derived Color Palette - Enhanced */
    --background: 0 0% 100%;
    --foreground: 220 25% 10%;

    /* Primary - Deep Maroon (WCAG AA Compliant - 7.2:1 contrast on white) */
    --primary: 345 75% 28%;
    --primary-foreground: 0 0% 100%;
    --primary-dark: 345 80% 20%;
    --primary-light: 345 55% 42%;

    /* Secondary - Warm Gold (adjusted for better contrast) */
    --secondary: 40 90% 42%;
    --secondary-foreground: 220 25% 10%;

    /* Accent */
    --accent: 345 30% 95%;
    --accent-foreground: 345 75% 28%;

    /* Muted (WCAG AA contrast - 4.6:1) */
    --muted: 220 20% 97%;
    --muted-foreground: 220 20% 35%;

    /* Cards */
    --card: 0 0% 100%;
    --card-foreground: 220 25% 10%;

    /* Popover */
    --popover: 0 0% 100%;
    --popover-foreground: 220 25% 10%;

    /* Borders */
    --border: 220 20% 85%;
    --input: 220 20% 85%;
    --ring: 345 75% 28%;

    /* Destructive (color-blind safe red with pattern support) */
    --destructive: 0 72% 45%;
    --destructive-foreground: 0 0% 100%;

    /* Success (color-blind safe - uses blue-green distinguishable from red) */
    --success: 160 70% 30%;
    --success-foreground: 0 0% 100%;

    /* Warning (high contrast amber) */
    --warning: 38 92% 40%;
    --warning-foreground: 0 0% 100%;

    /* Info (distinct blue) */
    --info: 210 80% 40%;
    --info-foreground: 0 0% 100%;

    /* Radius */
    --radius: 0.75rem;

    /* Sidebar */
    --sidebar-background: 345 75% 28%;
    --sidebar-foreground: 0 0% 100%;
    --sidebar-primary: 0 0% 100%;
    --sidebar-primary-foreground: 345 75% 28%;
    --sidebar-accent: 345 75% 22%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 345 50% 35%;
    --sidebar-ring: 40 90% 52%;

    /* Custom tokens */
    --gold: 40 90% 42%;
    --hero-start: 345 75% 26%;
    --hero-end: 345 80% 18%;
    --glow-primary: 345 75% 28%;
    --glow-gold: 40 90% 42%;

    /* Focus ring - high visibility */
    --focus-ring-width: 3px;
    --focus-ring-offset: 2px;
  }

  .dark {
    --background: 220 25% 8%;
    --foreground: 0 0% 95%;
    --primary: 345 65% 55%;
    --primary-foreground: 0 0% 100%;
    --secondary: 40 80% 55%;
    --secondary-foreground: 220 25% 10%;
    --accent: 345 30% 15%;
    --accent-foreground: 345 65% 75%;
    --muted: 220 20% 14%;
    --muted-foreground: 220 15% 70%;
    --card: 220 22% 12%;
    --card-foreground: 0 0% 95%;
    --popover: 220 22% 12%;
    --popover-foreground: 0 0% 95%;
    --border: 220 20% 25%;
    --input: 220 20% 25%;
    --ring: 345 65% 55%;
    --destructive: 0 70% 55%;
    --destructive-foreground: 0 0% 100%;
    --success: 160 60% 45%;
    --success-foreground: 0 0% 100%;
    --warning: 38 85% 55%;
    --warning-foreground: 220 25% 10%;
    --info: 210 70% 55%;
    --info-foreground: 0 0% 100%;
    --gold: 40 80% 55%;
  }

  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
  }

  [dir="rtl"] {
    font-family: 'Plus Jakarta Sans', 'Noto Sans Arabic', sans-serif;
  }

  /* Enhanced focus styles for color-blind accessibility */
  :focus-visible {
    @apply outline-[3px] outline-offset-2 outline-primary rounded-sm;
    box-shadow: 0 0 0 var(--focus-ring-offset) hsl(var(--background)), 
                0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) hsl(var(--ring));
  }

  /* Ensure links are distinguishable not just by color */
  a:not([class]) {
    @apply underline underline-offset-2 decoration-primary/50 hover:decoration-primary transition-colors;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    :root {
      --border: 220 30% 50%;
      --muted-foreground: 220 25% 25%;
    }
  }

  /* Reduced motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  .skip-link {
    @apply absolute -top-12 left-4 z-[100] bg-primary px-4 py-2 text-primary-foreground rounded-md transition-all focus:top-4;
  }

  h1 { @apply text-4xl font-bold tracking-tight md:text-5xl lg:text-6xl; }
  h2 { @apply text-3xl font-bold tracking-tight md:text-4xl; }
  h3 { @apply text-2xl font-semibold tracking-tight; }
  h4 { @apply text-xl font-semibold; }
  h5 { @apply text-lg font-medium; }
  h6 { @apply text-base font-medium; }
}

@layer components {
  .section-container {
    @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8;
  }

  /* Glassmorphism card */
  .glass-card {
    @apply bg-white/80 backdrop-blur-xl border border-white/20 shadow-xl;
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary via-primary-light to-secondary;
  }

  /* Animated gradient border */
  .gradient-border {
    @apply relative;
  }
  
  .gradient-border::before {
    content: '';
    @apply absolute -inset-px rounded-xl bg-gradient-to-r from-primary via-secondary to-primary opacity-0 transition-opacity duration-500;
    background-size: 200% 100%;
  }
  
  .gradient-border:hover::before {
    @apply opacity-100;
    animation: gradient-shift 3s linear infinite;
  }

  /* Floating animation */
  .float {
    animation: float 6s ease-in-out infinite;
  }

  /* Pulse glow */
  .pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* Shine effect */
  .shine {
    @apply relative overflow-hidden;
  }
  
  .shine::after {
    content: '';
    @apply absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/20 to-transparent;
    animation: shine 3s infinite;
  }
}

@layer utilities {
  /* Stagger animation delays */
  .stagger-1 { animation-delay: 0.1s; }
  .stagger-2 { animation-delay: 0.2s; }
  .stagger-3 { animation-delay: 0.3s; }
  .stagger-4 { animation-delay: 0.4s; }
  .stagger-5 { animation-delay: 0.5s; }
  .stagger-6 { animation-delay: 0.6s; }

  /* Animation keyframes */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 20px 0 hsl(var(--primary) / 0.3); }
    50% { box-shadow: 0 0 40px 10px hsl(var(--primary) / 0.5); }
  }

  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
  }

  @keyframes shine {
    0% { transform: translateX(-100%); }
    50%, 100% { transform: translateX(100%); }
  }

  @keyframes fade-up {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scale-in {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
  }

  @keyframes slide-in-left {
    from { opacity: 0; transform: translateX(-50px); }
    to { opacity: 1; transform: translateX(0); }
  }

  @keyframes slide-in-right {
    from { opacity: 0; transform: translateX(50px); }
    to { opacity: 1; transform: translateX(0); }
  }

  @keyframes bounce-subtle {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }

  @keyframes rotate-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .animate-fade-up {
    animation: fade-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
  }

  .animate-fade-in {
    animation: fade-in 0.6s ease-out forwards;
    opacity: 0;
  }

  .animate-scale-in {
    animation: scale-in 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
  }

  .animate-slide-left {
    animation: slide-in-left 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
  }

  .animate-slide-right {
    animation: slide-in-right 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
  }

  .animate-bounce-subtle {
    animation: bounce-subtle 2s ease-in-out infinite;
  }

  .animate-rotate-slow {
    animation: rotate-slow 20s linear infinite;
  }

  /* Hover transitions */
  .hover-lift {
    @apply transition-all duration-300 ease-out;
  }
  
  .hover-lift:hover {
    @apply -translate-y-2 shadow-2xl;
  }

  .hover-glow {
    @apply transition-all duration-300;
  }
  
  .hover-glow:hover {
    box-shadow: 0 0 30px hsl(var(--primary) / 0.3);
  }

  /* ========================================
     MADA ACCESSIBILITY - COLOR BLIND SUPPORT
     ======================================== */

  /* Status indicators with icons/patterns (not just color) */
  .status-success {
    @apply text-success;
  }
  
  .status-success::before {
    content: "✓ ";
  }

  .status-error {
    @apply text-destructive;
  }
  
  .status-error::before {
    content: "✕ ";
  }

  .status-warning {
    @apply text-warning;
  }
  
  .status-warning::before {
    content: "⚠ ";
  }

  .status-info {
    @apply text-info;
  }
  
  .status-info::before {
    content: "ℹ ";
  }

  /* Badge patterns for color-blind distinction */
  .badge-pattern-success {
    @apply bg-success text-success-foreground;
    background-image: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      hsl(var(--success-foreground) / 0.1) 2px,
      hsl(var(--success-foreground) / 0.1) 4px
    );
  }

  .badge-pattern-error {
    @apply bg-destructive text-destructive-foreground;
    background-image: repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 2px,
      hsl(var(--destructive-foreground) / 0.1) 2px,
      hsl(var(--destructive-foreground) / 0.1) 4px
    );
  }

  .badge-pattern-warning {
    @apply bg-warning text-warning-foreground;
    background-image: repeating-linear-gradient(
      90deg,
      transparent,
      transparent 3px,
      hsl(var(--warning-foreground) / 0.15) 3px,
      hsl(var(--warning-foreground) / 0.15) 6px
    );
  }

  .badge-pattern-info {
    @apply bg-info text-info-foreground;
    background-image: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 3px,
      hsl(var(--info-foreground) / 0.1) 3px,
      hsl(var(--info-foreground) / 0.1) 6px
    );
  }

  /* Interactive element focus enhancement */
  .focus-enhanced:focus-visible {
    @apply outline-[3px] outline-offset-2 outline-primary;
    box-shadow: 
      0 0 0 2px hsl(var(--background)),
      0 0 0 5px hsl(var(--ring)),
      0 0 12px hsl(var(--ring) / 0.4);
  }

  /* Link styling - always underlined for accessibility */
  .link-accessible {
    @apply underline underline-offset-4 decoration-2 hover:decoration-primary transition-colors;
  }

  /* Required field indicator (not just color) */
  .required-field::after {
    content: " *";
    @apply text-destructive font-bold;
  }

  /* Screen reader only content */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }

  /* Skip to content - visible on focus */
  .skip-to-content {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50;
    @apply focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-md;
  }

  /* High contrast borders for inputs */
  .input-accessible {
    @apply border-2 border-border focus:border-primary;
  }

  /* Color-blind safe chart colors (distinguishable patterns) */
  .chart-color-1 { background-color: hsl(345 75% 28%); } /* Primary maroon */
  .chart-color-2 { background-color: hsl(40 90% 42%); }  /* Gold */
  .chart-color-3 { background-color: hsl(210 80% 40%); } /* Blue */
  .chart-color-4 { background-color: hsl(160 70% 30%); } /* Teal */
  .chart-color-5 { background-color: hsl(280 60% 45%); } /* Purple */
  .chart-color-6 { background-color: hsl(30 80% 50%); }  /* Orange */
}

/* ========================================
   PRINT STYLES FOR ACCESSIBILITY
   ======================================== */
@media print {
  * {
    background: white !important;
    color: black !important;
  }
  
  a[href]::after {
    content: " (" attr(href) ")";
  }
  
  .no-print {
    display: none !important;
  }
}
